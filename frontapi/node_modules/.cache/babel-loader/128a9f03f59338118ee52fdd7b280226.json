{"ast":null,"code":"import _classCallCheck from\"/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import{BASE_BALL_SIZE,BASE_BALL_SPEED,BASE_HEIGHT}from\"./base\";import{GAME_SETTINGS}from\"./GameSettings\";import{Vec}from\"./Vec\";export var Ball=/*#__PURE__*/function(){function Ball(posx,posy,dirx,diry){_classCallCheck(this,Ball);this.pos=void 0;this.dir=void 0;this.size=void 0;this.speed=void 0;this.pos=new Vec(posx,posy);this.dir=new Vec(dirx,diry);this.size=BASE_BALL_SIZE;this.speed=BASE_BALL_SPEED;}_createClass(Ball,[{key:\"copy\",value:function copy(){var ball=new Ball(this.pos.x,this.pos.y,this.dir.x,this.dir.y);ball.size=this.size;ball.speed=this.speed;return ball;}},{key:\"set_dir\",value:function set_dir(x,y){this.dir=new Vec(x,y);}},{key:\"get_dir\",value:function get_dir(){return this.dir;}},{key:\"set_pos\",value:function set_pos(x,y){this.pos=new Vec(x,y);}},{key:\"get_pos\",value:function get_pos(){return this.pos;}},{key:\"set_size\",value:function set_size(s){this.size=s;}},{key:\"get_size\",value:function get_size(){return this.size;}},{key:\"collision_paddle_left\",value:function collision_paddle_left(left,nextpos){var leftpos=left.get_pos();if(nextpos.x<=leftpos.x&&this.pos.x>leftpos.x){var leftsize=left.get_size();var m=(this.pos.y-nextpos.y)/(this.pos.x-nextpos.x);var b=nextpos.y-m*nextpos.x;var inter=new Vec(leftpos.x,m*leftpos.x+b);if(inter.y>leftpos.y-leftsize.y&&inter.y<leftpos.y+leftsize.y){this.dir.x*=-1;this.dir.y=(inter.y-leftpos.y)/leftsize.y;return inter;}}}},{key:\"collision_paddle_right\",value:function collision_paddle_right(right,nextpos){var rightpos=right.get_pos();if(nextpos.x>=rightpos.x&&this.pos.x<rightpos.x){var rightsize=right.get_size();var m=(this.pos.y-nextpos.y)/(this.pos.x-nextpos.x);var b=nextpos.y-m*nextpos.x;var inter=new Vec(rightpos.x,m*rightpos.x+b);if(inter.y>rightpos.y-rightsize.y&&inter.y<rightpos.y+rightsize.y){this.dir.x*=-1;this.dir.y=(inter.y-rightpos.y)/rightsize.y;return inter;}}}},{key:\"collision_wall\",value:function collision_wall(nextpos){if(nextpos.y<=0||nextpos.y>=BASE_HEIGHT){this.dir.y*=-1;}else{return undefined;}}},{key:\"move\",value:function move(left,right){var nextpos=this.dir.mul(this.speed).add_vec(this.pos);if(this.collision_paddle_left(left,nextpos)!=undefined)this.apply_modifier(left);else if(this.collision_paddle_right(right,nextpos)!=undefined)this.apply_modifier(right);else if(this.collision_wall(nextpos)==undefined)this.pos=nextpos;}},{key:\"apply_modifier\",value:function apply_modifier(paddle){var reduce=GAME_SETTINGS.get_modifier(\"reduce\");if(reduce!=undefined)paddle.reduce(reduce);var accelerate_ball=GAME_SETTINGS.get_modifier(\"accelerate_ball\");if(accelerate_ball!=undefined)this.speed+=accelerate_ball;var accelerate_paddle=GAME_SETTINGS.get_modifier(\"accelerate_paddle\");if(accelerate_paddle!=undefined)paddle.add_speed(accelerate_paddle);}},{key:\"draw\",value:function draw(ctx,ratio){ctx.fillRect((this.pos.x-this.size)*ratio,(this.pos.y-this.size)*ratio,this.size*2*ratio,this.size*2*ratio);}}]);return Ball;}();","map":{"version":3,"names":["BASE_BALL_SIZE","BASE_BALL_SPEED","BASE_HEIGHT","GAME_SETTINGS","Vec","Ball","posx","posy","dirx","diry","pos","dir","size","speed","ball","x","y","s","left","nextpos","leftpos","get_pos","leftsize","get_size","m","b","inter","right","rightpos","rightsize","undefined","mul","add_vec","collision_paddle_left","apply_modifier","collision_paddle_right","collision_wall","paddle","reduce","get_modifier","accelerate_ball","accelerate_paddle","add_speed","ctx","ratio","fillRect"],"sources":["/frontend/src/game/gameTypes/Ball.tsx"],"sourcesContent":["\nimport {BASE_BALL_SIZE, BASE_BALL_SPEED, BASE_HEIGHT} from \"./base\";\nimport {GAME_SETTINGS} from \"./GameSettings\";\nimport {Paddle} from \"./Paddle\";\nimport { Vec } from \"./Vec\";\n\nexport class Ball {\n\n\tprivate pos: Vec;\n\tprivate dir: Vec;\n\tprivate size: number;\n\tprivate speed: number;\n\n\tpublic constructor(posx: number, posy: number, dirx: number, diry: number) {\n\t\tthis.pos = new Vec(posx, posy);\n\t\tthis.dir = new Vec(dirx, diry);\n\t\tthis.size = BASE_BALL_SIZE;\n\t\tthis.speed = BASE_BALL_SPEED;\n\t}\n\n\tpublic copy(): Ball {\n\t\tconst ball = new Ball(this.pos.x, this.pos.y, this.dir.x, this.dir.y);\n\t\tball.size = this.size;\n\t\tball.speed = this.speed;\n\t\treturn ball;\n\t}\n\n\n\tpublic set_dir(x: number, y: number) {\n\t\tthis.dir = new Vec(x, y);\n\t}\n\n\tpublic get_dir() {\n\t\treturn this.dir;\n\t}\n\n\tpublic set_pos(x: number, y: number) {\n\t\tthis.pos = new Vec(x, y);\n\t}\n\n\tpublic get_pos() {\n\t\treturn this.pos;\n\t}\n\n\tpublic set_size(s: number) {\n\t\tthis.size = s;\n\t}\n\n\tpublic get_size() {\n\t\treturn this.size;\n\t}\n\n\tprivate collision_paddle_left(left: Paddle, nextpos: Vec): any {\n\t\tconst leftpos: Vec = left.get_pos();\n\t\tif (nextpos.x <= leftpos.x && this.pos.x > leftpos.x) {\n\t\t\tconst leftsize: Vec = left.get_size();\n\t\t\tconst m: number = (this.pos.y - nextpos.y) / (this.pos.x - nextpos.x);\n\t\t\tconst b: number = nextpos.y - m * nextpos.x;\n\t\t\tconst inter: Vec = new Vec(leftpos.x, m * leftpos.x + b);\n\t\t\tif (inter.y > leftpos.y - leftsize.y && inter.y < leftpos.y + leftsize.y) {\n\t\t\t\tthis.dir.x *= -1;\n\t\t\t\tthis.dir.y = (inter.y - leftpos.y) / leftsize.y;\n\t\t\t\treturn inter;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate collision_paddle_right(right: Paddle, nextpos: Vec): any {\n\t\tconst rightpos: Vec = right.get_pos();\n\t\tif (nextpos.x >= rightpos.x && this.pos.x < rightpos.x) {\n\t\t\tconst rightsize: Vec = right.get_size();\n\t\t\tconst m: number = (this.pos.y - nextpos.y) / (this.pos.x - nextpos.x);\n\t\t\tconst b: number = nextpos.y - m * nextpos.x;\n\t\t\tconst inter: Vec = new Vec(rightpos.x, m * rightpos.x + b);\n\t\t\tif (inter.y > rightpos.y - rightsize.y && inter.y < rightpos.y + rightsize.y) {\n\t\t\t\tthis.dir.x *= -1;\n\t\t\t\tthis.dir.y = (inter.y - rightpos.y) / rightsize.y;\n\t\t\t\treturn inter;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate collision_wall(nextpos: Vec): any {\n\t\tif (nextpos.y <= 0 || nextpos.y >= BASE_HEIGHT) {\n\t\t\tthis.dir.y *= -1;\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tpublic move(left: Paddle, right: Paddle) {\n\t\tconst nextpos: Vec = this.dir.mul(this.speed).add_vec(this.pos);\n\t\tif (this.collision_paddle_left(left, nextpos) != undefined)\n\t\t\tthis.apply_modifier(left);\n\t\telse if (this.collision_paddle_right(right, nextpos) != undefined)\n\t\t\tthis.apply_modifier(right);\n\t\telse if (this.collision_wall(nextpos) == undefined)\n\t\t\tthis.pos = nextpos;\n\t}\n\n\tpublic apply_modifier(paddle: Paddle) {\n\t\tconst reduce: number | undefined = GAME_SETTINGS.get_modifier(\"reduce\");\n\t\tif (reduce != undefined)\n\t\t\tpaddle.reduce(reduce);\n\n\t\tconst accelerate_ball: number | undefined = GAME_SETTINGS.get_modifier(\"accelerate_ball\");\n\t\tif (accelerate_ball != undefined)\n\t\t\tthis.speed += accelerate_ball;\n\n\t\tconst accelerate_paddle: number | undefined = GAME_SETTINGS.get_modifier(\"accelerate_paddle\");\n\t\tif (accelerate_paddle != undefined)\n\t\t\tpaddle.add_speed(accelerate_paddle);\n\t}\n\n\tpublic draw(ctx: CanvasRenderingContext2D, ratio: number) {\n\t\tctx.fillRect(\n\t\t\t(this.pos.x - this.size) * ratio,\n\t\t\t(this.pos.y - this.size) * ratio,\n\t\t\tthis.size * 2 * ratio,\n\t\t\tthis.size * 2 * ratio\n\t\t);\n\t}\n\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}