{"ast":null,"code":"import{BASE_WIDTH}from\"./gameTypes/base\";import{Board}from\"./gameTypes/Board\";import{GAME_SETTINGS}from\"./gameTypes/GameSettings\";export function GameEngine(canvas){var ctx=canvas.getContext('2d');if(ctx){var board=new Board();var reqanim=true;canvas.width=1000;canvas.height=500;GAME_SETTINGS.ratio=canvas.width/BASE_WIDTH;console.log(canvas.width);console.log(canvas.height);var setup_key=function setup_key(){document.addEventListener('keydown',function(e){if(e.key===\"ArrowUp\")board.set_right_dir(0,-1);else if(e.key===\"ArrowDown\")board.set_right_dir(0,1);else if(e.key===\"w\")board.set_left_dir(0,-1);else if(e.key===\"s\")board.set_left_dir(0,1);});document.addEventListener('keyup',function(e){if(e.key===\"ArrowUp\"||e.key===\"ArrowDown\")board.set_right_dir(0,0);else if(e.key===\"w\"||e.key===\"s\")board.set_left_dir(0,0);});};var renderLoop=function renderLoop(){var ret=board.tick();if(ret)stopLoop();drawPong();if(reqanim)reqanim=requestAnimationFrame(renderLoop);};var stopLoop=function stopLoop(){if(reqanim){cancelAnimationFrame(reqanim);reqanim=undefined;}};var drawPong=function drawPong(){ctx.beginPath();board.draw(ctx,GAME_SETTINGS.ratio);ctx.stroke();};var setup=function setup(){setup_key();};var start=function start(){reqanim=true;board.reset();board.set_ball_dir(-1,0);drawPong();renderLoop();};setup();start();}}","map":{"version":3,"names":["BASE_WIDTH","Board","GAME_SETTINGS","GameEngine","canvas","ctx","getContext","board","reqanim","width","height","ratio","console","log","setup_key","document","addEventListener","e","key","set_right_dir","set_left_dir","renderLoop","ret","tick","stopLoop","drawPong","requestAnimationFrame","cancelAnimationFrame","undefined","beginPath","draw","stroke","setup","start","reset","set_ball_dir"],"sources":["/frontend/src/game/gameEngine.tsx"],"sourcesContent":["import {BASE_HEIGHT, BASE_WIDTH} from \"./gameTypes/base\";\nimport { Board } from \"./gameTypes/Board\"\nimport {GAME_SETTINGS} from \"./gameTypes/GameSettings\";\n\nexport function GameEngine(canvas: HTMLCanvasElement) {\n\tconst ctx = canvas.getContext('2d');\n\tif (ctx) {\n\t\t\n\t\tconst board: Board = new Board();\n\t\tvar reqanim: any = true;\n\t\tcanvas.width = 1000;\n\t\tcanvas.height = 500;\n\t\tGAME_SETTINGS.ratio = ((canvas.width / BASE_WIDTH));\n\t\tconsole.log(canvas.width);\n\t\tconsole.log(canvas.height);\n\n\n\t\tconst setup_key = () => {\n\t\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\t\tif (e.key === \"ArrowUp\")\n\t\t\t\t\tboard.set_right_dir(0, -1);\n\t\t\t\telse if (e.key === \"ArrowDown\")\n\t\t\t\t\tboard.set_right_dir(0, 1);\n\t\t\t\telse if (e.key === \"w\")\n\t\t\t\t\tboard.set_left_dir(0, -1);\n\t\t\t\telse if (e.key === \"s\")\n\t\t\t\t\tboard.set_left_dir(0, 1);\n\t\t\t});\n\t\t\tdocument.addEventListener('keyup', (e) => {\n\t\t\t\tif (e.key === \"ArrowUp\" || e.key === \"ArrowDown\")\n\t\t\t\t\tboard.set_right_dir(0, 0);\n\t\t\t\telse if (e.key === \"w\" || e.key === \"s\")\n\t\t\t\t\tboard.set_left_dir(0, 0);\n\t\t\t});\n\t\t}\n\n\t\tconst renderLoop = () => {\n\t\t\tconst ret: boolean = board.tick();\n\t\t\tif (ret)\n\t\t\t\tstopLoop();\n\t\t\tdrawPong();\n\t\t\t\n\t\t\tif (reqanim)\n\t\t\t\treqanim = requestAnimationFrame(renderLoop);\n\t\t}\n\n\t\tconst stopLoop = () => {\n\t\t\tif (reqanim)\n\t\t\t{\n\t\t\t\tcancelAnimationFrame(reqanim);\n\t\t\t\treqanim = undefined;\n\t\t\t}\n\t\t}\n\n\n\t\tconst drawPong = () => {\n\t\t\tctx.beginPath();\n\t\t\tboard.draw(ctx, GAME_SETTINGS.ratio);\n\t\t\tctx.stroke();\n\t\t}\n\n\t\tconst setup = () => {\n\t\t\tsetup_key();\n\t\t}\n\n\t\tconst start = () => {\n\t\t\treqanim = true;\n\t\t\tboard.reset();\n\t\t\tboard.set_ball_dir(-1, 0);\n\t\t\tdrawPong();\n\t\t\trenderLoop();\n\t\t}\n\n\n\t\tsetup();\n\t\tstart();\n\n\n\t}\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}